!function(s){"use strict";var t,o={en:{draggerText:"Drag here to move keyboard",backspace:"Backspace",tab:"Tab",capslock:"Caps lock",symbol1:";",symbol2:":",returnKey:"Enter",shift:"Shift",hidekeyboard:"Hide keyboard",space:"Space"},es:{draggerText:"Arrastre aquí para mover el teclado",backspace:"Borrar",tab:"Tab",capslock:"Bloq. Mayús.",symbol1:"ñ",symbol2:"Ñ",returnKey:"Intro",shift:"Mayús.",hidekeyboard:"Ocultar Teclado",space:"Espacio"}};s.fn.onScreenKeyboard=function(a){t=s.extend({draggable:!1,rewireReturn:!1,rewireTab:!1,topPosition:"1%",leftPosition:"1%",language:"en"},a);var n,e,l,b=this,c=s(),u=(e=s("#"+(n="osk-container")),l=o[t.language],e.length?e:(e=s('<div id="'+n+'"><div class="osk-dragger osk-last-item"><p>::: '+l.draggerText+' :::</p></div><button class="osk-symbol"><span class="osk-off">&acute;</span><span class="osk-on">#</span></button><button class="osk-number"><span class="osk-off">1</span><span class="osk-on">!</span></button><button class="osk-number"><span class="osk-off">2</span><span class="osk-on">&quot;</span></button><button class="osk-number"><span class="osk-off">3</span><span class="osk-on">&pound;</span></button><button class="osk-number"><span class="osk-off">4</span><span class="osk-on">$</span></button><button class="osk-number"><span class="osk-off">5</span><span class="osk-on">%</span></button><button class="osk-number"><span class="osk-off">6</span><span class="osk-on">^</span></button><button class="osk-number"><span class="osk-off">7</span><span class="osk-on">&amp;</span></button><button class="osk-number"><span class="osk-off">8</span><span class="osk-on">*</span></button><button class="osk-number"><span class="osk-off">9</span><span class="osk-on">(</span></button><button class="osk-number"><span class="osk-off">0</span><span class="osk-on">)</span></button><button class="osk-symbol"><span class="osk-off">-</span><span class="osk-on">_</span></button><button class="osk-symbol"><span class="osk-off">=</span><span class="osk-on">+</span></button><button class="osk-backspace osk-last-item">'+l.backspace+'</button><button class="osk-tab">'+l.tab+'</button><button class="osk-letter">q</button><button class="osk-letter">w</button><button class="osk-letter">e</button><button class="osk-letter">r</button><button class="osk-letter">t</button><button class="osk-letter">y</button><button class="osk-letter">u</button><button class="osk-letter">i</button><button class="osk-letter">o</button><button class="osk-letter">p</button><button class="osk-symbol"><span class="osk-off">[</span><span class="osk-on">{</span></button><button class="osk-symbol"><span class="osk-off">]</span><span class="osk-on">}</span></button><button class="osk-symbol osk-last-item"><span class="osk-off">\\</span><span class="osk-on">|</span></button><button class="osk-capslock">'+l.capslock+'</button><button class="osk-letter">a</button><button class="osk-letter">s</button><button class="osk-letter">d</button><button class="osk-letter">f</button><button class="osk-letter">g</button><button class="osk-letter">h</button><button class="osk-letter">j</button><button class="osk-letter">k</button><button class="osk-letter">l</button><button class="'+("en"==t.language?"osk-symbol":"osk-letter")+'">'+("en"==t.language?'<span class="osk-off">'+l.symbol1+'</span><span class="osk-on">'+l.symbol2+"</span>":l.symbol1)+'</button><button class="osk-symbol"><span class="osk-off">\'</span><span class="osk-on">@</span></button><button class="osk-return osk-last-item">'+l.returnKey+'</button><button class="osk-shift">'+l.shift+'</button><button class="osk-letter">z</button><button class="osk-letter">x</button><button class="osk-letter">c</button><button class="osk-letter">v</button><button class="osk-letter">b</button><button class="osk-letter">n</button><button class="osk-letter">m</button><button class="osk-symbol"><span class="osk-off">,</span><span class="osk-on">&lt;</span></button><button class="osk-symbol"><span class="osk-off">.</span><span class="osk-on">&gt;</span></button><button class="osk-symbol"><span class="osk-off">/</span><span class="osk-on">?</span></button><button class="osk-hide osk-last-item">'+l.hidekeyboard+'</button><button class="osk-space osk-last-item">'+l.space+"</button></div>"),s("body").append(e),e)),r=u.children("button"),k=u.children("button.osk-letter"),p=u.children("button.osk-symbol"),i=u.children("button.osk-number"),d=u.children("button.osk-return"),f=u.children("button.osk-tab"),g=!1,h=!1,m=[],y=f.css("marginRight").indexOf("%")>-1;function C(t){var o=t.attr("data-osk-options");r.prop("disabled",!1).removeClass("osk-disabled"),b.removeClass("osk-focused"),void 0!==o&&(m=o.split(" "),s.inArray("disableSymbols",m)>-1&&p.prop("disabled",!0).addClass("osk-disabled"),s.inArray("disableTab",m)>-1&&f.prop("disabled",!0).addClass("osk-disabled"),s.inArray("disableReturn",m)>-1&&d.prop("disabled",!0).addClass("osk-disabled")),t.addClass("osk-focused").focus()}function v(){var t,o=s(),a=u.width(),n=0;y&&r.each(function(){(o=s(this)).hasClass("osk-dragger")||o.hasClass("osk-space")||(n+=o.width()+Math.floor(parseFloat(o.css("marginRight"))/100*a),o.hasClass("osk-last-item")&&((t=a-n)>0&&o.width(o.width()+t),t=0,n=0))})}return t.draggable&&jQuery.ui&&(u.children("div.osk-dragger").show(),u.css("paddingTop","0").draggable({containment:"document",handle:"div.osk-dragger"})),u.css("top",t.topPosition).css("left",t.leftPosition),v(),u.hide().css("visibility","visible"),s(window).resize(function(){v()}),b.click(function(){C(c=s(this)),u.fadeIn("fast")}),u.on("click","button",function(){var o,a,n=s(this),e=n.html(),l=document.getElementById(c.attr("id")),r=l.selectionStart,d=l.selectionEnd;if(n.hasClass("osk-disabled"))return c.focus(),!1;if(n.hasClass("osk-hide"))return u.fadeOut("fast"),c.blur(),b.removeClass("osk-focused"),!1;if(n.hasClass("osk-shift"))return k.toggleClass("osk-uppercase"),s.merge(p.children("span"),i.children("span")).toggle(),p.hasClass("osk-disabled")&&i.toggleClass("osk-disabled"),g=!g,h=!1,!1;if(n.hasClass("osk-capslock"))return k.toggleClass("osk-uppercase"),h=!0,!1;if(n.hasClass("osk-backspace"))return o=c.val(),c.val(o.substr(0,r-(r==d?1:0))+o.substr(d)),c.trigger("keyup"),c.focus(),r==d?(r>0||d>0)&&(l.selectionStart=r-1,l.selectionEnd=d-1):(l.selectionStart=r,l.selectionEnd=r),!1;if((n.hasClass("osk-symbol")||n.hasClass("osk-number"))&&(e=s("span:visible",n).html()),n.hasClass("osk-space")&&(e=" "),n.hasClass("osk-tab")){if(t.rewireTab)return c.trigger("onchange"),a=b.index(c)+1,C(c=a<b.length?s(b[a]):s(b[0])),!1;e="\t"}if(n.hasClass("osk-return")){if(t.rewireReturn)return b.parent("form").submit(),!1;e="\n"}n.hasClass("osk-uppercase")&&(e=e.toUpperCase()),g&&(s.merge(p.children("span"),i.children("span")).toggle(),h||k.toggleClass("osk-uppercase"),t.disableSymbols&&i.toggleClass("osk-disabled"),g=!1),o=c.val(),c.val(o.substr(0,r)+e+o.substr(d)),c.trigger("keyup"),c.focus(),l.selectionStart=r+1,l.selectionEnd=d+1}),this.destroy=function(){u.remove()},this}}(jQuery);